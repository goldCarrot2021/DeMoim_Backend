<br>
<br>

## DeMoim ì„œë¹„ìŠ¤ ì†Œê°œ

- í•´ë‹¹ í”„ë¡œì íŠ¸ëŠ” ë¶€íŠ¸ìº í”„ í•­í•´ 99ì—ì„œ ì‘ì—…í•œ ì‹¤ì „ í”„ë¡œì íŠ¸ë¡œ ì‹¤ì œ ëŸ°ì¹­ì„ í†µí•´ ì‹¤ ì‚¬ìš©ìë¥¼ ìƒëŒ€ë¡œ ìš´ì˜ê²½í—˜ì„ ìŒ“ëŠ” í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.
- í˜‘ì—…ê²½í—˜ì´ í•„ìš”í•œ ì·¨ì¤€ìƒë“¤ì„ ìœ„í•œ íŒ€ì› ëª¨ì§‘ í”Œë«í¼
- ê·¸ì™¸ì—ë„ ìì‹ ì´ ì‘ì—…í•œ í”„ë¡œì íŠ¸ì— ëŒ€í•œ ì •ë³´ë¥¼ ê³µìœ 
- ì§€ì›ê³¼ ì§€ì›ì·¨ì†Œ ê¸°ëŠ¥ì„ í†µí•´ ê°„í¸í•˜ê²Œ ì§€ì›ê°€ëŠ¥

![image](https://user-images.githubusercontent.com/78028746/121785601-a7593700-cbf5-11eb-8406-009f18524c06.png)

ğŸ‰ [ì‚¬ì´íŠ¸ ì£¼ì†Œ] [https://demoim.co.kr/]
ğŸ¬ [ì‹œì—° ì˜ìƒ] [https://www.youtube.com/watch?v=8u1KISOf3OU]
ğŸ§‘ [íŒ€ì› ì†Œê°œ] [https://www.notion.so/Demoim-87856b49c18545358ee657b434bff365]

<br>

## DeMoim Frontend 
https://github.com/holasim91/demoim_fe

<br>

## ëª©ì°¨
### 1. ê°œìš”
### 2. í”„ë¡œì íŠ¸ ì£¼ìš” ê¸°ëŠ¥
### 3. í˜ì´ì§€ë³„ ê¸°ëŠ¥ ì†Œê°œ
  * ë¬¸ìì¸ì¦
  * Signup
  * Home Page
  * Detail Page
  * Product Registration Page
  * Mypage + MyStore
  * Chatting
### 4. íŠ¸ëŸ¬ë¸” ìŠˆíŒ…
### 5. ê³ ê° ë°˜ì‘ ë° ê°œì„  ì‚¬í•­
### 6. ê¸°íƒ€



## ê°œìš”

- í”„ë¡œì íŠ¸ ëª… :: DeMiom

- í”„ë¡œì íŠ¸ ì†Œê°œ :: í”„ë¡œì íŠ¸ íŒ€ì›ì„ ëª¨ì§‘í•  ìˆ˜ ìˆëŠ” ì›¹ í”Œë«í¼.

- ê°œë°œ ì¸ì› :: ë°±ì—”ë“œ 3ëª…, í”„ë¡ íŠ¸ì—”ë“œ 3ëª…, ë””ìì´ë„ˆ 1ëª…

- ê°œë°œ ì–¸ì–´ ::  Java 8 , React

- ê°œë°œ ê¸°ê°„ :: 2021.04.23 ~2021.05.19

- ìš´ì˜ ê¸°ê°„ :: 2021.05.19 ~ (ì‚¬ìš©ìì˜ í”¼ë“œë°±ì„ ë°›ì•„ ì„œë¹„ìŠ¤ ê°œì„ )

- ë‹´ë‹¹ ì—…ë¬´  
  * ì´ì€ì§€
    + êµ¬í˜„ ê¸°ëŠ¥ ë³„ í…Œì´ë¸” ì„¤ê³„
    +  Coolsmsë¥¼ ì´ìš©í•œ ë¬¸ìì¸ì¦ 
    +  SmallTalk ë° í”„ë¡œì íŠ¸ ìë‘í•˜ê¸°(ê²Œì‹œíŒ) ê¸°ëŠ¥ êµ¬í˜„
    +  ê´€ë ¨ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± 
  * ê¹€ì¤€ì—½
    + êµ¬í˜„ ê¸°ëŠ¥ë³„ í…Œì´ë¸” ì„¤ê³„
    + íŒ€ ë©”ì´í‚¹, ì§€ì› ,ë§ˆì´í˜ì´ì§€ Api êµ¬í˜„
    + ë°°í¬
  * ì •ì„ì§„
    + êµ¬í˜„  í…Œì´ë¸” ì„¤ê³„
    + íšŒì›ê°€ì… ë° ë¡œê·¸ì¸,ì•Œë¦¼,ë§ˆì´í˜ì´ì§€,ì§€ì›,ëŒ“ê¸€ apiêµ¬í˜„
    + ë°°í¬(HTTPS)

- ê°œë°œ í™˜ê²½ :: Springboot 2.4.5, jdk 1.8 , Spring data JPA , Spring security, Junit4

- ë°°í¬í™˜ê²½ :: Gradle, AWS S3, AWS EC2

- ë°ì´í„° ë² ì´ìŠ¤ :: Mysql(AWS RDS)

- í˜•ì„± ê´€ë¦¬ íˆ´ :: git

- ì¼ì • ê´€ë¦¬ íˆ´ :: Notion,Slack

- ì£¼ìš” ê¸°ëŠ¥ 
  * ë§ˆì´í˜ì´ì§€ 
  * í”„ë¡œì íŠ¸ ì§€ì› ë° ì§€ì› ì·¨ì†Œ
  * smalltalk,í”„ë¡œì íŠ¸ ìë‘í•˜ê¸° ê²Œì‹œê¸€ ë° ëŒ“ê¸€ CRUD
  * ì„œë¹„ìŠ¤ ë°ì´í„° ìë™ ìµœì‹ í™”(í”„ë¡œì íŠ¸ ëª¨ì§‘ê¸€)

<br>

## í…Œì´ë¸” ì„¤ê³„ 

![image](https://user-images.githubusercontent.com/78028746/119464301-8da69b80-bd7d-11eb-9f0e-b94edf8f95c2.png)


<br>

## ì£¼ìš” ê¸°ëŠ¥ ì†Œê°œ 

### `ë¬¸ìì¸ì¦`

* ê¸°ì¡´ì˜ ì¸ì¦ ì‹œìŠ¤í…œì€ ì‚¬ì—…ì ë“±ë¡ì´ í•„ìš”. -> ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì „í™”ë²ˆí˜¸ë¡œ ì¸ì¦ ë²ˆí˜¸ë¥¼ ë°œì†¡í•˜ê³  í•´ë‹¹ ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ëŠ” ì§€ë¥¼ í™•ì¸í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ëŒ€ì²´
* coolsms ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•œ ë¬¸ì ë°œì†¡ 
     â†’ Coolsmsë¥¼ ì„ íƒí•œ ì´ìœ  

     + í† ìŠ¤,í•œêµ­íˆ¬ìì¦ê¶Œê°™ì€ ê¸°ì—…ì—ì„œë„ ì‚¬ìš©í•  ë§Œí¼ì˜ ì•ˆì •ì„±
 
     + ë§ì€ ì‚¬ëŒë“¤ì´ ì‚¬ìš©í•˜ëŠ” ë§Œí¼ ë ˆí¼ëŸ°ìŠ¤ê°€ í’ë¶€ â†’ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…ì— ìš©ì´


```java
 public void sendCertNumberSms(String phoneNum,String certNumber){

        Message coolsms = new Message(CoolsmsProperties.api_key, CoolsmsProperties.api_secret);
        HashMap<String, String> params = new HashMap<String, String>();

        params.put("to",phoneNum );
        params.put("from",CoolsmsProperties.fromNumber );
        params.put("type", "SMS");
        params.put("text", "[DeMoim]ì¸ì¦ë²ˆí˜¸ëŠ”"+certNumber+"ì…ë‹ˆë‹¤.");
        params.put("app_version", "test app 1.2");

        try {

            JSONObject obj = (JSONObject) coolsms.send(params);
            System.out.println(obj.toString());

            //ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´
            if(obj.containsKey("error_list")){
                throw new IllegalArgumentException("ë¬¸ìë©”ì„¸ì§€ê°€ ë°œì†¡ë˜ì§€ëª»í–ˆìŠµë‹ˆë‹¤.");
            }

        } catch (
                CoolsmsException e) {
            throw new IllegalArgumentException("ë¬¸ìë©”ì„¸ì§€ê°€ ë°œì†¡ë˜ì§€ëª»í–ˆìŠµë‹ˆë‹¤.");

        }
    }
```

<br>

### `ì—”í‹°í‹° ì„¤ê³„ì‹œ ì–‘ë°©í–¥ ë§¤í•‘`
* í…Œì´ë¸”ê³¼ íŒ¨ëŸ¬ë‹¤ì„ì˜ ë¶ˆì¼ì¹˜ë¥¼ í•´ì†Œí•˜ê¸°ìœ„í•´ì„œ ê°ì²´ê°€ ì„œë¡œë¥¼ ì°¸ì¡° í•  ìˆ˜ìˆë„ë¡ ì–‘ë°©í–¥ .
* LAZY íƒ€ì…ì„ í†µí•´ ë¶ˆí•„ìš”í•˜ê²Œ ì°¸ì¡°ë˜ëŠ” ë°ì´í„° ì¡°íšŒë¥¼ í•´ê²° -> ì„±ëŠ¥ ì´ìŠˆë¥¼ ë°©ì§€

```java
 @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "userId")
    private User smallTalkUser;

    @Builder
    public SmallTalk(String contents) {
        this.contents = contents;
    }

    public void setUser(User user){

        //ê¸°ì¡´ì— ìˆë˜ smallTalkì„ ì œê±°
        if(this.smallTalkUser != null){
            this.smallTalkUser.getSmallTalks().remove(this);
        }
        this.smallTalkUser = user;
        smallTalkUser.getSmallTalks().add(this);
    }
```

<br>

### `S3ë¥¼ ì´ìš©í•œ ì´ë¯¸ì§€ ì—…ë¡œë“œ`

* Quill ì—ë””í„° ì‚¬ìš© 
 + Quill ì„ íƒ ì´ìœ  : ck ì—ë””í„°, í† ìŠ¤íŠ¸ ë“± ë‹¤ë¥¸ ì—ë””í„°ì™€ ë¹„êµí•˜ì—¬ ê°€ë³ê³  ì»¤ìŠ¤í„°ë§ˆì´ì§•í•˜ê¸°ì— ìš©ì´
* í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìš”ì²­ì´ ì˜¬ë•Œë§ˆë‹¤ S3ì—ì„œ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí›„ S3_urlì„ ë°˜í™˜


<br>

### `í…ŒìŠ¤íŠ¸ì½”ë“œ ì‘ì„±`

* mockì„ ì´ìš©í•´ì„œ unit í…ŒìŠ¤íŠ¸ ì‘ì„±.
```java

    @Test
    public void í”„ë¡œì íŠ¸ìë‘í•˜ê¸°_ë“±ë¡() throws Exception {

        //given
        // í˜•ì‹ì„ ë§ì¶”ì£¼ê¸°ìœ„í•œ ë¹ˆ ê°ì²´ ìƒì„±
        User user = new User();
        ExhibitionDto exhibitionDto = new ExhibitionDto();
        ResponseUserDto responseUserDto = new ResponseUserDto();
        ExhibitionResponseDto exhibitionResponseDto = new ExhibitionResponseDto();
        MockMultipartFile file = new MockMultipartFile("file", "img.jpg", "/jpg,png", "data".getBytes(StandardCharsets.UTF_8));

        Authentication authentication = mock(Authentication.class);

        //when

        // methodì˜ inputê³¼ out ê°’ì„ ì§€ì •í•´ì¤Œ.
        given(exhibitionService.createExhibition(authentication,exhibitionDto.toString(),file))
                .willReturn(exhibitionResponseDto);

        given(userService.findCurUser(authentication)).willReturn(java.util.Optional.of(user));

        // then
        mvc.perform(multipart("/api/exhibition")
                .file("requestBody",exhibitionDto.toString().getBytes(StandardCharsets.UTF_8))
                .file(file)
                .param("authentication",new ObjectMapper().writeValueAsString(authentication)))
                .andExpect(status().isOk())
                .andDo(MockMvcResultHandlers.print());

    }

```
<br>

### í”„ë¡œì íŠ¸ ì§€ì› ë° íŒ€ì› ì„ íƒ ê¸°ëŠ¥
* Apply í…Œì´ë¸”ì„ ë§Œë“¤ì–´ í•´ë‹¹ í”„ë¡œì íŠ¸ì˜ ì§€ì›ê´€ë ¨ ë°ì´í„°ë¥¼ ê´€ë¦¬ 
* ë¦¬ë”ì¸ì§€ íŒ€ì›ì¸ì§€ ë”°ë¡œ ê¶Œí•œì„ ì¤˜ì„œ ì„¤ì •í•˜ì§€ì•Šì€ ì´ìœ  
 + í•œ ìœ ì €ê°€ íŒ€ì›ì´ ë  ìˆ˜ë„ ìˆê³  ë¦¬ë”ê°€ ë  ìˆ˜ë„ ìˆê¸°ë•Œë¬¸ì— Spring Securityì˜ ê¶Œí•œì„ ì´ìš©í•˜ì—¬ ê´€ë¦¬í•˜ê¸° ë³µì¡í•˜ë‹¤ê³  íŒë‹¨.
 + íšŒì˜ ê²°ê³¼ ì‚¬ì‹¤ìƒ ê²Œì‹œê¸€ì˜ ì‘ì„±ìê°€ ë¦¬ë”ì„ìœ¼ë¡œ ë”°ë¡œ ê¶Œí•œì„ ì¤˜ì„œ ë¶ˆí•„ìš”í•œ ë¹„ìš©ì„ ë°œìƒì‹œí‚¬ ì´ìœ ê°€ ì—†ë‹¤ëŠ” ê²°ë¡ ì„ ë‚´ë¦¼.
 
 

<br>
<br>

## íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

### 1. n+1ìƒí™©ì—ì„œ join fetchê°€ ì‘ë™í•˜ì§€ì•ŠëŠ” ë¬¸ì œ 

* ë¬¸ì œ ë°œìƒ

     + join fetchë¥¼ í†µí•´ n+1 ë¬¸ì œë¥¼ í•´ê²°í•˜ê³ ìí–ˆì§€ë§Œ n+1 ë¬¸ì œí•´ê²° ì‹œë„.

* ë¬¸ì œ í•´ê²°

     + pagingë˜ì–´ìˆëŠ” ê²½ìš° join fetchì´ ì ìš©ë˜ì§€ì•ŠëŠ” ë‹¤ëŠ” ë¬¸ì œë¥¼ ë°œê²¬ -> @Entity Graphë¥¼ í†µí•´ n+1 ë¬¸ì œ í•´ê²°

![image](https://user-images.githubusercontent.com/78028746/120094693-e5b61700-c15c-11eb-8e3e-3ba2ec694117.png)

<br>

### 2. CoolSmsë¥¼ ì´ìš©í•œ ë¬¸ì ì¸ì¦ ì½”ë“œê°€ ì‘ë™í•˜ëŠ”ë° ë¬¸ìê°€ ì•ˆê°€ëŠ” ë¬¸ì œ

![image](https://user-images.githubusercontent.com/78028746/120095121-14cd8800-c15f-11eb-8e3b-f8c71a55099f.png)


* ë¬¸ì œ ë°œìƒ 

     + ì½”ë“œê°€ ì‘ë™í•˜ëŠ”ë° ë¬¸ìë¥¼ ë°›ì§€ëª»í•˜ëŠ” í”¼ë“œë°± ë°œìƒ.
     + ì‚¬ì—…ìë“±ë¡ì„ í•˜ì§€ì•Šì•„ ì•ˆì‹¬ë²ˆí˜¸ë¡œ ë¬¸ìë¥¼ ë°œì†¡í•˜ê³ ìˆì—ˆëŠ”ë° **í†µì‹ ì‚¬ì˜ ì„¤ì •ì— ë”°ë¼ ì•ˆì‹¬ë²ˆí˜¸ë¡œ ì˜¤ëŠ” ë¬¸ìê°€ ê±°ë¶€ë˜ëŠ” ìƒí™©ì´ ë°œìƒ**

* í•´ê²° ë°©ë²• 

     + 010ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ë²ˆí˜¸ë¡œ ë¬¸ì ë°œì†¡ â†’ ë¬¸ìê°€ ë¬¸ì œì—†ì´ ë°œì†¡ë¨ì„ í™•ì¸
     + ì½”ë“œë¥¼ ì œëŒ€ë¡œ êµ¬í˜„í•´ë„ ì™¸ë¶€ì ì¸ ìš”ì¸ìœ¼ë¡œ ì¸í•´ ì‚¬ìš©ìì—ê²Œ ë¶ˆí¸í•¨ì„ ì¤„ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒ, **ê°œë°œìê°€ ê°œë°œë§Œ ì˜í•˜ë©´ ë˜ëŠ” ê²Œ ì•„ë‹ˆë¼ ê¸°íšì ì¸ ìš”ì†Œ , ì™¸ë¶€ì ì¸ ìš”ì¸ ê¹Œì§€ ê³ ë ¤í•´ì•¼í•œë‹¤ëŠ” ë°°ì›€**ì„ ì–»ì—ˆìŠµë‹ˆë‹¤.
    
<br>

### 3. í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±ì‹œ authenticationì„ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•„ì˜¤ì§€ëª»í•˜ëŠ” ë¬¸ì œ.

* ë¬¸ì œ ë°œìƒ 

     + íŒŒë¼ë¯¸í„°ë¡œ autheticationì„ ë°›ì•„ì˜¤ì§€ëª»í•˜ëŠ” controllerì˜ í…ŒìŠ¤íŠ¸ ì‘ì„± ì¤‘ authenticationì„ ë°›ì•„ì˜¤ì§€ëª»í•˜ëŠ” ë¬¸ì œ ë°œìƒí–ˆìŠµë‹ˆë‹¤.
 
 ```java 
 @PostMapping("/api/exhibition")
    public ExhibitionResponseDto createExhibition(Authentication authentication,
																									 @RequestPart(value = "requestBody") String requestBody, 
																									@RequestPart MultipartFile file) {
        return exhibitionService.createExhibition(authentication,requestBody,file);
    }
 ```
 * ë¬¸ì œ í•´ê²°
 
     + MockCustomUserë¥¼ í†µí•´ ROLE_USERì— ëŒ€í•œ ê¶Œí•œ ë¬¸ì œëŠ” í•´ê²° í–ˆì§€ë§Œ authenticationì„ ë°›ì•„ì˜¤ì§€ ëª»í•¨
     + ê°•ì œë¡œ authentcationì„ ë§Œë“¤ì–´ì£¼ëŠ” ë°©ë²•ì„ ì‹œë„ â†’ ì„±ê³µí–ˆì§€ë§Œ authenticatinoì„ ì‹¤ì œë¡œ ë§Œë“¤ì–´ì„œ ë¶ˆí•„ìš”í•œ ë¹„ìš©ì„ ë°œìƒì‹œí‚¨ë‹¤ëŠ” ì  í…ŒìŠ¤íŠ¸ ì½”ë“œì— ì í•©í•˜ì§€ì•Šë‹¤ê³  íŒë‹¨
     + mockì„ ì´ìš©í•´ authentication í´ë˜ìŠ¤ë¥¼ ìƒì„±í•´ì„œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.

![image](https://user-images.githubusercontent.com/78028746/121785366-6b71a200-cbf4-11eb-990e-3c80ab2640df.png)

<br>
<br>


## ìµœì¢… ì„±ê³¼ 

* ì‘ì€ ìˆ«ìë¼ê³  í• ìˆ˜ìˆì§€ë§Œ ì‹¤ì œë¡œ ì‚¬ìš©ìë¥¼ ëŸ°ì¹­í•˜ê³  í”¼ë“œë°±ì„ ë°›ì•„ë³´ëŠ”  ëª©í‘œë¥¼ ì‹¤ì œë¡œ ì´ë£¨ì›Œë‚¸ ê²½í—˜ì…ë‹ˆë‹¤. ì œê°€ ê°œë°œí•œ ì‚¬ì´íŠ¸ë¥¼ ì‹¤ì œë¡œ ì‚¬ìš©í•´ì£¼ì‹œëŠ” ë¶„ë“¤ì´ ìˆë‹¤ëŠ” ì ì—ì„œ ë¿Œë“¯í•¨ì„ ëŠê¼ˆë˜ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.


![image](https://user-images.githubusercontent.com/78028746/121785420-ab388980-cbf4-11eb-98e8-0a2f4935797c.png)


![image](https://user-images.githubusercontent.com/78028746/121783238-6dcdff00-cbe8-11eb-9f34-2abfa34a9e0b.png)

<br>
<br>

## ì‹¤ì œ ì‚¬ì´íŠ¸ì— ì˜¬ë¼ì˜¨ ì‚¬ìš©ì ê²Œì‹œê¸€

![image](https://user-images.githubusercontent.com/78028746/121785373-74fb0a00-cbf4-11eb-8e79-d7c237ac3171.png)
![image](https://user-images.githubusercontent.com/78028746/121785380-7cbaae80-cbf4-11eb-91d6-7f59deadca97.png)
![image](https://user-images.githubusercontent.com/78028746/121785386-83e1bc80-cbf4-11eb-8999-614cba71e9cb.png)
![image](https://user-images.githubusercontent.com/78028746/121785393-87754380-cbf4-11eb-95f0-ade27b7436a5.png)




